Index: src/java/org/dellroad/stuff/vaadin/ContextApplication.java
===================================================================
--- src/java/org/dellroad/stuff/vaadin/ContextApplication.java	(revision 360)
+++ src/java/org/dellroad/stuff/vaadin/ContextApplication.java	(working copy)
@@ -10,9 +10,11 @@
 import com.vaadin.Application;
 import com.vaadin.terminal.Terminal;
 import com.vaadin.terminal.gwt.server.HttpServletRequestListener;
-import com.vaadin.ui.Window;
+import com.vaadin.ui.Notification;
+import com.vaadin.ui.Root;
 
 import java.net.SocketException;
+import java.util.Collection;
 import java.util.EventObject;
 import java.util.HashSet;
 import java.util.List;
@@ -122,15 +124,19 @@
     public void showError(String title, String description) {
 
         // Get window
-        Window window = this.getMainWindow();
-        if (window == null)
-            return;
+        Root root = Root.getCurrentRoot();
+        if (root == null) {
+            Collection<Root> roots = this.getRoots();
+            if (roots.isEmpty())
+                return;
+            root = roots.iterator().next();
+        }
 
         // Show error
-        Window.Notification notification = new Window.Notification(title, description, Window.Notification.TYPE_ERROR_MESSAGE);
+        Notification notification = new Notification(title, description, Notification.TYPE_ERROR_MESSAGE);
         notification.setStyleName("warning");
         notification.setDelayMsec(this.getNotificationDelay());
-        window.showNotification(notification);
+        root.showNotification(notification);
     }
 
     /**
Index: src/ivy/ivy.xml
===================================================================
--- src/ivy/ivy.xml	(revision 360)
+++ src/ivy/ivy.xml	(working copy)
@@ -15,7 +15,7 @@
     </configurations>
 
     <dependencies>
-        <dependency force="true" org="com.vaadin" name="vaadin" rev="6.7+" conf="build->default"/>
+        <dependency force="true" org="com.vaadin" name="vaadin" rev="7.0.0.alpha2" conf="build->default"/>
         <dependency force="true" org="javax.servlet" name="servletapi" rev="3.0" conf="build->default"/>
         <dependency force="true" org="javax.persistence" name="persistence-api" rev="2.0" conf="build->default"/>
         <dependency force="true" org="javax.validation" name="validation-api" rev="1.0.0.GA" conf="build->default"/>
